<nav class="navbar navbar-expand-lg navbar-light bg-skyblue">
  <div class="container">
      <div id="filterGitHubUser" class="col text-left">
          <div class="d-inline-block" ngbDropdown #myDrop="ngbDropdown">
            <button
              class="btn btn-white"
              id="dropdownManual"
              ngbDropdownToggle>
              Sort Profiles
            </button>
            <div ngbDropdownMenu aria-labelledby="dropdownManual">
              <button ngbDropdownItem (click)="sortByNameAscending()">Sort By User Name (A-Z)</button>
              <button ngbDropdownItem (click)="sortByNameDescending()">Sort By User Name (Z-A)</button>
            </div>
          </div>
        </div>
      
        <div class="col">
          <div class="input-group">
            <input
              #searchUser
              type="search"
              placeholder="Search..."
              id="search"
              class="form-control"
              (keyup.enter)="onKeyUp(searchUser.value)"
            />
          </div>
        </div>
  </div>  
</nav>

<div
  class="container"
  *ngIf="
    gitHubDataFromAPI &&
    gitHubUserDetails.length === gitHubDataFromAPI.items.length
  "
>
  <div id="totalResults">Total Results : {{ totalResults }}</div>
  <div class="gitHubData" *ngFor="let user of gitHubUsers | slice: (page-1) * pageSize : (page-1) * pageSize + pageSize; let i = index">
    <div class="gitUsers">
      <div class="thumbnailSection">
        <img class="profilePic" [src]="user.avatar_url" id="user.id" />
      </div>
      <div class="profileDetailsSection">
        <h3>{{ user?.id | fullName: gitHubUserDetails }}</h3>
        <h6>Profile URL: {{ user?.html_url }}</h6>
        <div class="dataSection">
          <div>
            <span>Company: {{user?.id | companyName: gitHubUserDetails}}</span>
            <br />
            <span>Location: {{user?.id | location: gitHubUserDetails}}</span>
          </div>
          <div id="detailsButton" class="col text-right" style="float: right">
            <button
              class="btn btn-outline-primary"
              (click)="acc.toggle('toggle'); getReposData(user.login, $event);"
            >
              Details
            </button>
          </div>
        </div>
      </div>
    </div>
    <div class="extraDetailsSection">
      <ngb-accordion #acc="ngbAccordion">
        <ngb-panel id="toggle">          
          <ng-template  ngbPanelContent>
            <table class="table table-striped">
              <thead>
                <th>Repository Name</th>
                <th>Programming Language</th>
                <th>Open Issues</th>
                <th>Followers</th>
                <th>Fork Count</th>
              </thead>
              <tbody>
                <tr *ngFor="let repo of gitHubRepos">
                  <td>{{repo.name}}</td>
                  <td>{{(repo.language === null)?"N/A": repo.language}}</td>
                  <td class="centeredText">{{repo.open_issues_count}}</td>
                  <td class="centeredText">{{repo.watchers}}</td>
                  <td class="centeredText">{{repo.forks_count}}</td>
                </tr>                
              </tbody>
            </table>
          </ng-template>
        </ngb-panel>
      </ngb-accordion>
    </div>
  </div>
  <div id="pagination">
    <ngb-pagination
    [(page)]="page"
    [pageSize]="pageSize"
    [collectionSize]="gitHubUsers.length"></ngb-pagination>
  </div>
</div>
